@model IEnumerable<_420_476_Devoir3_Iannuzzi_David.Models.Product>

@{
    ViewBag.Title = "Index";
}

@{string title = "Bonjour " + Session["userName"];}

<style>
    td {
        border-top: 1px solid black;
        padding: 1em;
    }

    th {
        padding: 1em;
    }
</style>
<br />
<section style="position:relative; margin-top:2em; margin-bottom:1.5em">

    <h2 style="display:inline;">@title</h2>

    <div style="float:right;">
        @Html.ActionLink("Deconnection", "Index", "Home", routeValues: null, htmlAttributes: new { id = "signOutLink" })
    </div>

</section>
<br />
@using (Html.BeginForm("Index", "Products"))
{
    <form>
        @Html.DropDownList("categoryName", (SelectList)ViewBag.Cats, htmlAttributes: new { @class = "form-control" })
        <input id="Submit1" type="submit" value="submit" />
    </form>
    
}
<br />
<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.ProductName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.QuantityPerUnit)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UnitPrice)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UnitsInStock)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UnitsOnOrder)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ReorderLevel)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Discontinued)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Image)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Category.CategoryName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Supplier.CompanyName)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ProductName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.QuantityPerUnit)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UnitPrice)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UnitsInStock)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UnitsOnOrder)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ReorderLevel)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Discontinued)
        </td>
        <td>
            @{
                if(item.Image != null)
                {
                    <img src="@Url.Content(ViewBag.imgPath + item.Image)"/>
                    Html.DisplayFor(modelItem => item.Image);
                }
                else
                {
                    Html.Label("NO PICTURE");
                }

            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Category.CategoryName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Supplier.CompanyName)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.ProductID }) |
            @Html.ActionLink("Details", "Details", new { id=item.ProductID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.ProductID })
        </td>
    </tr>
}

</table>
